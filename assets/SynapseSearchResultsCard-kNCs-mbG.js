import{V as _,j as a,an as z,r as T,d6 as t,aj as H,fD as B,eL as G,gK as U,K as m,d5 as Y,a$ as K,W as f,Y as C,$ as Q,cf as W,cg as J,du as X,dt as Z,P as ee}from"./iframe-D4dZwAiu.js";import{E as te}from"./EntityIcon-wCWO95nQ.js";import{F as ae}from"./FavoriteButton-CniIM9dy.js";import{D as se}from"./DropdownMenu-BvFbHKlH.js";import{P as ne}from"./ProgrammaticInstructionsModal-C5ZVnzx6.js";import{M as oe}from"./ModalDownload-DEQhmNzb.js";import{c as ie,b as re}from"./useDownloadList-YtZ_HZO-.js";import{u as R,e as le}from"./useEntity-CLsVNppT.js";import{u as de}from"./useGetEntityChildren-C8Wx3Cpr.js";import{d as v}from"./DownloadConfirmationUtils-Be_Ckkvr.js";import{u as ce}from"./useHasAccess-FuiLG9rU.js";import{C as S}from"./Chip-BrFyeTvK.js";const ue=_(a.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zm-8 2V5h2v6h1.17L12 13.17 9.83 11zm-6 7h14v2H5z"})),ye=_(a.jsx("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8z"})),E=`import synapseclient
syn = synapseclient.Synapse()
syn.login(authToken="YOUR_TOKEN_HERE")`,D=`library(synapser)
synLogin(authToken="YOUR_TOKEN_HERE")`;function pe(e,s,n){const o=e===t.dataset&&n?`${s}.${n}`:s;switch(e){case t.file:case t.folder:case t.project:case t.link:return{cliCode:`synapse get -r ${s}`,rCode:`${D} 

# Download file
synGet('${s}')`,pythonCode:`${E} 

# Download file
syn.get('${s}')`};case t.dockerrepo:return{cliCode:`docker login -u <synapse username> -p <synapse password> docker.synapse.org 

docker pull docker.synapse.org/${s}/myrepo`,rCode:void 0,pythonCode:void 0};case t.dataset:case t.entityview:case t.datasetcollection:case t.table:case t.materializedview:case t.submissionview:case t.virtualtable:case t.recordset:return{cliCode:`synapse get -q "SELECT * FROM ${o}"`,rCode:`${D} 

query <- synTableQuery("SELECT * FROM ${o}")
read.table(query$filepath, sep=",")`,pythonCode:`${E} 

query = syn.tableQuery("SELECT * FROM ${o}")
query.asDataFrame()`};default:throw new Error(`Unhandled EntityType: ${e}`)}}function me(e,s,n,o,l,d,u,i,p,y){switch(o){case 0:return{text:"Download File",onClick:()=>{console.log("Download file:",e,s)},tooltipText:"Download this file directly"};case 1:return{text:"Add to Download Cart",disabled:y,tooltipText:fe(n,!!y),onClick:()=>{n===t.file||n===t.recordset?u({entityId:e,entityVersionNumber:p}):n===t.dataset?i({parentId:e,useVersionNumber:!0,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest"}):n===t.entityview?i({concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",query:{sql:`SELECT * FROM ${e}`}}):i({parentId:e,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest"})}};case 2:return{text:"Programmatic Access",onClick:()=>{l(!0)},tooltipText:"View programmatic access options"};case 3:return{text:"Programmatic Access (Docker)",onClick:()=>{l(!0)},tooltipText:"View programmatic options to pull Docker image"};case 4:return{text:"Export Table",onClick:()=>{d(!0)},tooltipText:"Export table data"}}}const fe=(e,s)=>s?`This ${Y(e)} has no accessible files`:"Add file(s) to your download cart";function g(e){switch(e){case t.file:case t.recordset:return[[1,2]];case t.project:case t.folder:return[[1,2]];case t.dockerrepo:return[[3]];case t.entityview:case t.dataset:return[[4,2,1]];case t.datasetcollection:case t.table:case t.materializedview:case t.submissionview:case t.virtualtable:return[[4,2]];case t.link:return[[2]];default:throw new Error(`Unhandled EntityType: ${e}`)}}function ge(e,s){const{data:n,isLoading:o}=R(e),l=s===t.dataset,{data:d,isLoading:u}=le(e,0,1,{enabled:l});let i;return l?d?.results&&d.results.length>0?i=d.results[0].versionNumber:i=void 0:i=n&&U(n)?n.versionNumber:void 0,{latestVersionNumber:i,isLoading:o||u}}function he(e,s,n){let o;return n===t.dataset?o=s?`SELECT * FROM ${e}.${s}`:`SELECT * FROM ${e}`:o=`SELECT * FROM ${e}`,{concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:`${e}`,query:{sql:o},partMask:0}}function h(e){const{latestVersionNumber:s}=ge(e.entityId,e.entityType),n=he(e.entityId,s,e.entityType),{downloadCartPageUrl:o}=z(),{mutate:l}=ie({onSuccess:r=>{r.numberOfFilesAdded>0?v(o):m("0 Files added to your Download Cart","info")},onError:r=>{m(r.reason,"danger")}}),{mutate:d}=re({onSuccess:r=>{r.numberOfFilesAdded!=null&&r.numberOfFilesAdded>0?v(o):m("0 Files added to your Download Cart","info")},onError:r=>{m(r.reason,"danger")}}),[u,i]=T.useState(!1),p=()=>{i(!1)},y=e.entityType===t.folder||e.entityType===t.project,{data:k}=de({parentId:e.entityId,includeTypes:[t.file],includeTotalChildCount:!0},{enabled:y}),F=y&&k?.totalChildCount===0,{data:c}=R(e.entityId),A=c&&H(c)&&!B(c),I=c&&G(c)&&(!c.items||c.items.length===0),L=F||A||I,[N,w]=T.useState(!1),q=()=>{w(!1)},$=g(e.entityType).map(r=>r.map(P=>me(e.entityId,e.name,e.entityType,P,i,w,l,d,s,L))),{cliCode:V,rCode:O,pythonCode:M}=pe(e.entityType,e.entityId,s);return a.jsxs(a.Fragment,{children:[a.jsx(se,{items:$,dropdownButtonText:"Download",buttonTooltip:"Download options for this entity",buttonProps:{variant:"outlined",startIcon:a.jsx(ue,{})}}),a.jsx(ne,{show:u,title:`Programmatic Access: ${e.name}`,onClose:p,pythonCode:M,rCode:O,cliCode:V,helpUrl:"https://help.synapse.org/docs/Synapse-Docker-Registry.2011037752.html#SynapseDockerRegistry-UsingDockerImagesStoredintheSynapseDockerRegistry"}),N&&a.jsx(oe,{queryBundleRequest:n,onClose:q})]})}try{g.displayName="getDownloadActionsForEntityType",g.__docgenInfo={description:"",displayName:"getDownloadActionsForEntityType",props:{}}}catch{}try{h.displayName="EntityDownloadButton",h.__docgenInfo={description:"",displayName:"EntityDownloadButton",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"link"'},{value:'"table"'},{value:'"file"'},{value:'"folder"'},{value:'"entityview"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"project"'},{value:'"dockerrepo"'},{value:'"materializedview"'},{value:'"virtualtable"'},{value:'"recordset"'}]}}}}}catch{}const j={backgroundColor:"#DAE9E7",fontSize:"15px",textTransform:"capitalize",padding:"12px",marginRight:"8px",".MuiChip-label":{pl:"5px",pr:0}};function x({entityId:e}){const{accessText:s,icon:n,accessRequirementDialog:o,setDisplayAccessRequirement:l}=ce(e);return a.jsxs(a.Fragment,{children:[a.jsx(S,{label:s,icon:n,sx:{...j},onClick:()=>l(!0)}),o]})}try{x.displayName="HasAccessChip",x.__docgenInfo={description:"",displayName:"HasAccessChip",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"normal"'}]}}}}}catch{}const xe=K(ee,{label:"SynapseSearchResultsCardContainer"})(({theme:e})=>({display:"flex",flexDirection:"column",minHeight:"250px",width:"100%",borderRadius:"10px",padding:"32px",gap:"15px"}));function b(e){return a.jsxs(xe,{children:[a.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[a.jsx(C,{variant:"headline3",children:a.jsx(Q,{href:`${W(J.PORTAL_ENDPOINT)}Synapse:${e.entityId}`,children:e.name})}),a.jsxs(f,{sx:{display:"flex",gap:"16px",alignItems:"center"},children:[a.jsx(ae,{entityId:e.entityId}),a.jsx(h,{entityId:e.entityId,name:e.name,entityType:e.entityType})]})]}),a.jsxs(f,{sx:{display:"flex",flexDirection:"row"},children:[a.jsx(S,{icon:a.jsx(te,{type:e.entityType,wrap:!1,sx:{color:"#265149",width:"18px"}}),label:e.entityType,sx:{...j}}),a.jsx(x,{entityId:e.entityId})]}),a.jsxs(f,{sx:{display:"flex",flexDirection:"row",gap:"8px"},children:[a.jsx(ye,{}),a.jsxs(C,{sx:{fontSize:"14px"},children:["Last updated: ",X(Z.unix(e.modifiedOn),"M/D/YYYY")]})]})]})}try{b.displayName="SynapseSearchResultsCard",b.__docgenInfo={description:"",displayName:"SynapseSearchResultsCard",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"link"'},{value:'"table"'},{value:'"file"'},{value:'"folder"'},{value:'"entityview"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"project"'},{value:'"dockerrepo"'},{value:'"materializedview"'},{value:'"virtualtable"'},{value:'"recordset"'}]}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"number"}}}}}catch{}export{b as S};

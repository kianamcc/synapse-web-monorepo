import{et as R,eQ as x,c3 as q,eS as k,j as d,r as f,eO as g,fp as P,eF as u,d1 as T}from"./iframe-D4dZwAiu.js";import{u as E}from"./UserSearchBoxV2-Bgdq_b7A.js";import{u as G}from"./QueryContext-CcB2J2KR.js";import{b as Y,a as B}from"./QueryWrapper-b_pdX1-W.js";import{E as H}from"./EnumFacetFilterSkeleton-CrwMOCPx.js";import{E as $}from"./EnumFacetFilterUI-rRRlOK5w.js";import{c as z}from"./_createAggregator-Cu1O6Ts8.js";import{s as _}from"./useAccessRequirements-B0iEcAuc.js";var J=z(function(n,e,a){n[a?0:1].push(e)},function(){return[[],[]]});function K(n,e=[],a=[],F=[]){const{value:o}=n;let c=o;if(o===q)return k;const i=e.find(r=>r.ownerId===o);e.length&&(c=i?i.userName:`unknown (${o})`);const m=a.find(r=>r.id===o);a.length&&(c=m?m.name:`unknown (${o})`);const p=F.find(r=>r.id===o);return p?.name&&(c=p.name),c}function W(n,e){const a=R(e,n.query.selectedFacets);return a?x(a)?a.facetValues.length===0:(console.error("getAllIsSelected: matchingSelectedFacet is not a FacetColumnValuesRequest",a),!0):!0}function X(n){const{facet:e,containerAs:a="Collapsible",dropdownType:F="Icon",hideCollapsible:o=!1,defaultShowAllValues:c=!1}=n,{nextQueryRequest:i,addValueToSelectedFacet:m,removeSelectedFacet:p,removeValueFromSelectedFacet:r,resetDebounceTimer:w}=G(),{data:V}=Y(),{getColumnDisplayName:D}=B(),I=f.useMemo(()=>{const t=R(e,g(i.query.selectedFacets));if(t&&!x(t)){console.error("The facet rendered in EnumFacetFilter is not a FacetColumnValuesRequest",e);return}return t},[e,i.query.selectedFacets]),j=W(g(i),e),l=V.columnModels?P(e,V.columnModels):void 0,v=f.useMemo(()=>{switch(l?.columnType){case u.DOUBLE:case u.DATE:case u.INTEGER:return!0;default:return!1}},[l]),L=l?.columnType===u.USERID||l?.columnType===u.USERID_LIST?e.facetValues.map(t=>t.value):[],A=E({ids:L,type:"USER_PROFILE"}),U=l?.columnType===u.ENTITYID||l?.columnType===u.ENTITYID_LIST?e.facetValues.map(t=>t.value):[],C=E({ids:U,type:"ENTITY_HEADER"}),M=l?.columnType===u.EVALUATIONID?e.facetValues.map(t=>t.value):[],h=E({ids:M,type:"EVALUATION_QUEUE"}),O=f.useMemo(()=>{const t=e.facetValues.map(s=>({...s,isSelected:I?.facetValues.includes(s.value)??!1,displayText:K(s,A,C,h)})),N=J(t,s=>s.value===q),Q=N[0],y=N[1];let S=y;return(l==null||l.facetSortConfig==null)&&(v?S=_(y,s=>Number(s.value)):S=_(y,s=>s.displayText.toLowerCase())),[...S,...Q]},[e.facetValues,l,I?.facetValues,A,C,h,v]);return l?d.jsx($,{facetTitle:D(e.columnName,e.jsonPath),filterIsActive:!j,facetValues:O,containerAs:a,dropdownType:F,hideCollapsible:o,defaultShowAllValues:c,onHoverOverValue:()=>{w()},onAddValueToSelection:t=>{m(T(e,["columnName","jsonPath"]),t,{debounce:!0})},onRemoveValueFromSelection:t=>{r(T(e,["columnName","jsonPath"]),t,{debounce:!0})},onRemoveAllFacetSelections:()=>p(T(e,["columnName","jsonPath"])),canMultiSelect:!0}):d.jsx(d.Fragment,{})}function b(n){const{containerAs:e="Collapsible",dropdownType:a="Icon"}=n;return d.jsx(f.Suspense,{fallback:d.jsx(H,{containerAs:e,dropdownType:a}),children:d.jsx(X,{...n})})}try{b.displayName="EnumFacetFilter",b.__docgenInfo={description:"",displayName:"EnumFacetFilter",props:{facet:{defaultValue:null,description:"",name:"facet",required:!0,type:{name:"FacetColumnResultValues"}},containerAs:{defaultValue:null,description:"",name:"containerAs",required:!1,type:{name:"enum",value:[{value:'"Collapsible"'},{value:'"Dropdown"'}]}},dropdownType:{defaultValue:null,description:"",name:"dropdownType",required:!1,type:{name:"enum",value:[{value:'"Icon"'},{value:'"SelectBox"'}]}},hideCollapsible:{defaultValue:null,description:"",name:"hideCollapsible",required:!1,type:{name:"boolean"}},defaultShowAllValues:{defaultValue:null,description:"",name:"defaultShowAllValues",required:!1,type:{name:"boolean"}}}}}catch{}export{b as E};
